<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Jump</title>
    <style>
        /* Reset and Basic Setup */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none; /* Prevent text selection */
            -webkit-user-select: none;
            touch-action: none; /* Prevent default touch actions like scrolling */
        }

        body {
            background-color: #0a0a0a; /* Dark Mode Background */
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden; /* Prevent scrolling */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
        }

        /* Game Container */
        #game-container {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 600px; /* Limit width on large screens */
            background: #111;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.1);
            overflow: hidden;
        }

        canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        /* UI Overlay (Menu) */
        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10;
            transition: opacity 0.3s;
        }

        /* Typography */
        h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 3px;
            color: #0ff; /* Neon Cyan */
            text-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
            text-align: center;
        }

        p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: #ddd;
        }

        .score-display {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #f0f; /* Neon Magenta */
            text-shadow: 0 0 5px #f0f;
        }

        /* Buttons */
        button {
            padding: 15px 40px;
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
            background: transparent;
            border: 2px solid #0f0; /* Neon Green */
            border-radius: 30px;
            cursor: pointer;
            box-shadow: 0 0 10px #0f0;
            transition: all 0.2s ease;
            text-transform: uppercase;
            outline: none;
        }

        button:active {
            transform: scale(0.95);
            background: rgba(0, 255, 0, 0.2);
        }

        /* HUD (Heads Up Display) - Score during game */
        #hud {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 2rem;
            font-weight: bold;
            color: rgba(255, 255, 255, 0.8);
            pointer-events: none; /* Let clicks pass through */
            z-index: 5;
            display: none; /* Hidden in menu */
        }

        /* Hidden class for toggling visibility */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>

    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
        
        <!-- In-game Score -->
        <div id="hud">0</div>

        <!-- Main Menu / Game Over Screen -->
        <div id="ui-layer">
            <h1 id="game-title">NEON JUMP</h1>
            <p id="game-message">Tap to Jump</p>
            <div class="score-display" id="final-score"></div>
            <div class="score-display" id="best-score">Best: 0</div>
            <button id="action-btn">START GAME</button>
        </div>
    </div>

    <script>
        // --- Game Configuration & State ---
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // UI Elements
        const uiLayer = document.getElementById('ui-layer');
        const actionBtn = document.getElementById('action-btn');
        const gameTitle = document.getElementById('game-title');
        const gameMessage = document.getElementById('game-message');
        const hud = document.getElementById('hud');
        const finalScoreEl = document.getElementById('final-score');
        const bestScoreEl = document.getElementById('best-score');

        // Game State
        let isPlaying = false;
        let isGameOver = false;
        let score = 0;
        let highScore = localStorage.getItem('neonJumpHighScore') || 0;
        let frames = 0;
        let gameSpeed = 3;
        let animationId;

        // Physics
        const gravity = 0.6;
        
        // Player Object
        const player = {
            x: 50,
            y: 0,
            width: 30,
            height: 30,
            dy: 0,
            jumpForce: -10,
            color: '#0ff', // Cyan
            draw: function() {
                ctx.fillStyle = this.color;
                ctx.shadowBlur = 15;
                ctx.shadowColor = this.color;
                ctx.fillRect(this.x, this.y, this.width, this.height);
                ctx.shadowBlur = 0; // Reset shadow for performance
            },
            update: function() {
                this.dy += gravity;
                this.y += this.dy;

                // Floor Collision
                if (this.y + this.height > canvas.height) {
                    this.y = canvas.height - this.height;
                    this.dy = 0;
                    gameOver();
                }

                // Ceiling Collision
                if (this.y < 0) {
                    this.y = 0;
                    this.dy = 0;
                }
            },
            jump: function() {
                this.dy = this.jumpForce;
            }
        };

        // Obstacles Array
        const obstacles = [];

        class Obstacle {
            constructor() {
                this.width = 40;
                this.gap = 150; // Gap between top and bottom pipe
                this.x = canvas.width;
                // Randomize the top height
                this.topHeight = Math.random() * (canvas.height - this.gap - 100) + 50; 
                this.bottomY = this.topHeight + this.gap;
                this.color = '#f0f'; // Magenta
                this.passed = false;
            }

            draw() {
                ctx.fillStyle = this.color;
                ctx.shadowBlur = 10;
                ctx.shadowColor = this.color;
                
                // Top Obstacle
                ctx.fillRect(this.x, 0, this.width, this.topHeight);
                
                // Bottom Obstacle
                ctx.fillRect(this.x, this.bottomY, this.width, canvas.height - this.bottomY);
                
                ctx.shadowBlur = 0;
            }

            update() {
                this.x -= gameSpeed;

                // Collision Detection
                // X-axis overlap
                if (player.x < this.x + this.width && player.x + player.width > this.x) {
                    // Y-axis overlap (hitting top or bottom)
                    if (player.y < this.topHeight || player.y + player.height > this.bottomY) {
                        gameOver();
                    }
                }

                // Score Update
                if (this.x + this.width < player.x && !this.passed) {
                    score++;
                    hud.innerText = score;
                    this.passed = true;
                    
                    // Increase difficulty slightly
                    if (score % 5 === 0) gameSpeed += 0.5;
                }
            }
        }

        // --- Core Functions ---

        function init() {
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            // Input Listeners
            window.addEventListener('keydown', handleInput);
            canvas.addEventListener('touchstart', handleInput, {passive: false});
            canvas.addEventListener('mousedown', handleInput);
            
            actionBtn.addEventListener('click', startGame);
            
            updateBestScoreDisplay();
        }

        function resizeCanvas() {
            canvas.width = document.getElementById('game-container').clientWidth;
            canvas.height = document.getElementById('game-container').clientHeight;
            
            // Reset player position on resize if not playing
            if (!isPlaying) {
                player.y = canvas.height / 2;
            }
        }

        function handleInput(e) {
            if (e.type === 'keydown' && e.code !== 'Space') return;
            if (e.type === 'touchstart') e.preventDefault(); // Prevent scrolling

            if (isPlaying && !isGameOver) {
                player.jump();
            }
        }

        function startGame() {
            // Reset State
            isPlaying = true;
            isGameOver = false;
            score = 0;
            frames = 0;
            gameSpeed = 3;
            obstacles.length = 0; // Clear obstacles
            
            // Reset Player
            player.y = canvas.height / 2;
            player.dy = 0;
            player.jump(); // Initial jump

            // UI Updates
            uiLayer.classList.add('hidden');
            hud.classList.remove('hidden');
            hud.innerText = '0';

            // Start Loop
            animate();
        }

        function gameOver() {
            isGameOver = true;
            isPlaying = false;
            cancelAnimationFrame(animationId);

            // Update High Score
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('neonJumpHighScore', highScore);
            }

            // UI Updates
            gameTitle.innerText = "GAME OVER";
            gameMessage.innerText = "You hit an obstacle!";
            actionBtn.innerText = "TRY AGAIN";
            finalScoreEl.innerText = `Score: ${score}`;
            finalScoreEl.style.display = 'block';
            updateBestScoreDisplay();
            
            uiLayer.classList.remove('hidden');
            hud.classList.add('hidden');
        }

        function updateBestScoreDisplay() {
            bestScoreEl.innerText = `Best: ${highScore}`;
        }

        function animate() {
            if (!isPlaying) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Background Effect (Subtle Grid or Stars could go here)
            
            // Player Logic
            player.update();
            player.draw();

            // Obstacle Logic
            if (frames % 120 === 0) { // Spawn rate
                obstacles.push(new Obstacle());
            }

            for (let i = 0; i < obstacles.length; i++) {
                obstacles[i].update();
                obstacles[i].draw();

                // Remove off-screen obstacles
                if (obstacles[i].x + obstacles[i].width < 0) {
                    obstacles.splice(i, 1);
                    i--;
                }
            }

            frames++;
            animationId = requestAnimationFrame(animate);
        }

        // Initialize Game
        init();

    </script>
</body>
</html>